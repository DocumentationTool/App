<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="toggle">
    <i class="ri-menu-line" (click)="onToggleSidebar()"></i>
  </div>

  <div class="box">
    <button (click)="this.navigationService.onEditor()" [disabled]="!this.resourceService.selectedFile()"
       [ngClass]="navigationService.mode() === 'editor' && this.navigationService.isEditorActive() ? 'selected' : 'preview'">
      Editor
    </button>

    @if (this.navigationService.isEditorActive()) {
      <button (click)="this.navigationService.onPreview()"
         [ngClass]="navigationService.mode() === 'preview' ? 'selected' : 'preview'">
        Preview
      </button>
    }
    <button class="ri-save-line" (click)="this.resourceService.updateResource()" [disabled]="!resourceService.checkForFileChanges()"></button>
  </div>

  <form class="search" (click)="onSearchFocus()">
    <span class="ri-search-line" (click)="onSearchFocus()"></span>
    <input class="search-input" #searchInput (focus)="onSearchFocus()" name="search" placeholder="Search"
           autocomplete="off"
           [(ngModel)]="searchTerm" (input)="search()">
  </form>

  @if (isSearchActive && filteredFiles.length > 0) {
    <div class="search-results">
      @for (file of filteredFiles; track file) {
        <div class="search-box" (click)="this.resourceService.onSelectResource(file)">
          <span class="file-path">{{ file.path }}</span>
          <span class="repo-id">{{ file.repoId }}</span>
        </div>
      }
    </div>
  }

  <div class="profile" (click)="toggleDropdown()">
    Profile
    @if (isDropdownOpen) {
      <div class="dropdown-menu">
        <div class="dropdown-item" (click)="this.navigationService.logAdminIn()">
          Admin
        </div>
        <div class="dropdown-item" (click)="this.navigationService.logUserIn()">
          User1
        </div>
      </div>
    }
  </div>
</nav>

@if (navigationService.toggle()) {
  <div class="left-sidebar">
    <nav class="nav flex-column">
      <ul>

        <ul> <!--For loop für alles Repos im FileTree-->
          <li *ngFor="let repo of resourceService.fileTree()?.content | keyvalue">
            <a [href]="getAssetUrl(repo.key)"
               (click)="toggleRepo(repo.key); $event.preventDefault()"
               [ngClass]="{'active': resourceService.selectedFile()?.path === repo.key}">
              {{ repo.key }}
            </a>

            <ul *ngIf="isRepoOpen(repo.key)"> <!--wenn Repo geöffnet, for loop für alle resourcen im Tree-->
              <li *ngFor="let resource of repo.value.resources"
                  (mouseover)="hoveredResource = resource.path + ' ' + resource.repoId"
                  (mouseleave)="hoveredResource = null">
                <!--bearbeitungs button am ende des resourcen namen-->
                <button *ngIf="hoveredResource === resource.path + ' ' + resource.repoId" class="menu-button"
                        (click)="openMenu($event, resource)">
                  &#x22EE;
                </button>
                <a [href]="getAssetUrl(resource.path)"
                   (click)="resourceService.onSelectResource(resource); $event.preventDefault()"
                   [ngClass]="{'active': resourceService.selectedFile()?.path === resource.path && resource.repoId === resourceService.selectedFile()?.repoId}">
                  {{ resource.path }}
                </a>

                <div *ngIf="selectedResource === resource"
                     class="popup-menu"
                     [style.top.px]="menuPosition.y"
                     [style.left.px]="menuPosition.x">
                  <ul>
                    <li (click)="editTags(resource)">Edit tags</li>
                    <li (click)="moveResource(resource)">Move resource</li>
                    <li (click)="deleteResource(resource)">Delete resource</li>
                  </ul>
                </div>

              </li>
            </ul>
          </li>
        </ul>

        <div class="upload">
          <input #fileInput type="file" accept=".md" style="display: none" (change)="onUpload($event)"/>
          <i class="ri-file-upload-line ms-md-2" (click)="navigationService.uploadResource()"></i>
        </div>

        @if (this.navigationService.isAdmin()) {
          <div class="nav-admin">
            <a routerLink="/main/admin" routerLinkActive="active" class="nav-admin"
               [routerLinkActiveOptions]="{ exact: true }">
              Admin
            </a>
          </div>
        }
      </ul>
    </nav>
  </div>
}

@if (navigationService.editTags()) {

}
@if (navigationService.moveResource()){

}
